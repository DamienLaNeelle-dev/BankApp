<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <title>Cours de la bourse</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
</head>
<body>

<div class="container mt-4" x-data="stocksData()" x-init="init()">

  <h1>Cours de la bourse</h1>

  <div x-show="loading">Chargement...</div>

  <table class="table" x-show="!loading">
    <thead>
    <tr>
      <th>ID</th>
      <th>Symbole</th>
      <th>Prix</th>
      <th>Mise Ã  jour</th>
    </tr>
    </thead>
    <tbody>
    <template x-for="s in stocks" :key="s.id">
      <tr>
        <td x-text="s.id"></td>
        <td x-text="s.symbol"></td>
        <td x-text="s.price"></td>
        <td x-text="s.lastUpdated"></td>
      </tr>
    </template>
    </tbody>
  </table>

</div>

<script>
  function stocksData() {
      return {
          stocks: [],
          loading: true,

          init() {
              fetch("/api/stocks")
                  .then(r => r.json())
                  .then(data => {
                      this.stocks = data;
                      this.loading = false;
                  });
          }
      }
  }
</script>

</body>
</html>
